
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>W.A.R. | Wheelchair Accessible Restaurants</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css">
<style>
body {
    margin: 0;
    font-family: 'Poppins', sans-serif;
    background: #f5f5f5;
}
header {
    background: #1e88e5;
    color: white;
    padding: 1rem;
    text-align: center;
    font-size: 1.4rem;
    font-weight: 600;
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
}
#map {
    width: 100%;
    height: calc(100vh - 140px);
}
.controls {
    padding: 0.5rem;
    background: white;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    align-items: center;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}
select, input {
    padding: 0.5rem;
    margin: 0.3rem;
    border-radius: 6px;
    border: 1px solid #ccc;
    font-size: 1rem;
}
button {
    background: #1e88e5;
    color: white;
    border: none;
    padding: 0.6rem 1.2rem;
    border-radius: 6px;
    font-size: 1rem;
    cursor: pointer;
    margin: 0.3rem;
}
button:hover {
    background: #1565c0;
}
.stars {
    color: gold;
    font-size: 1.1rem;
}
footer {
    padding: 0.6rem;
    background: white;
    text-align: center;
    font-size: 0.9rem;
    box-shadow: 0 -2px 8px rgba(0,0,0,0.1);
}
.ad-slot {
    width: 100%;
    background: #eee;
    text-align: center;
    padding: 0.8rem;
    font-size: 0.8rem;
    color: #666;
}
</style>
</head>
<body>
<header>♿ W.A.R. — Wheelchair Accessible Restaurants</header>

<div class="controls">
    <input type="text" id="searchInput" placeholder="Search restaurants...">
    <select id="categoryFilter">
        <option value="all">All Categories</option>
        <option value="Fast Food">Fast Food</option>
        <option value="Fine Dining">Fine Dining</option>
        <option value="Café">Café</option>
        <option value="Pizza">Pizza</option>
    </select>
    <button onclick="resetMap()">Reset</button>
    <button onclick="showAddForm()">Add Restaurant</button>
</div>

<div class="ad-slot">Ad space — Google AdSense will go here</div>
<div id="map"></div>

<footer>© 2025 W.A.R. — Accessibility First</footer>

<!-- Add Restaurant Form -->
<div id="addForm" style="display:none; position:fixed; top:50%; left:50%; transform:translate(-50%,-50%);
background:white; padding:1rem; box-shadow:0 4px 12px rgba(0,0,0,0.3); border-radius:8px; z-index:1000; max-width:300px;">
    <h3>Add Restaurant</h3>
    <input type="text" id="newName" placeholder="Restaurant Name" style="width:100%; margin-bottom:0.5rem;">
    <input type="text" id="newCategory" placeholder="Category" style="width:100%; margin-bottom:0.5rem;">
    <input type="number" id="newRating" placeholder="W.A.R. Stars (1-5)" style="width:100%; margin-bottom:0.5rem;">
    <textarea id="newNotes" placeholder="Accessibility notes" style="width:100%; margin-bottom:0.5rem;"></textarea>
    <button onclick="saveRestaurant()">Save</button>
    <button onclick="closeAddForm()">Cancel</button>
</div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
let map;
let markers = [];
let restaurants = [
    {
        name: "Accessible Café",
        category: "Café",
        rating: 5,
        notes: "Wide entrance, accessible restroom",
        lat: 40.7128,
        lng: -74.0060
    },
    {
        name: "Inclusive Pizza",
        category: "Pizza",
        rating: 4,
        notes: "Ramp entrance, tables spaced apart",
        lat: 34.0522,
        lng: -118.2437
    }
];

function initMap() {
    map = L.map('map').setView([20, 0], 2);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '© OpenStreetMap contributors'
    }).addTo(map);

    loadMarkers();
}

function loadMarkers() {
    clearMarkers();
    restaurants.forEach(r => {
        const marker = L.marker([r.lat, r.lng]).addTo(map);
        marker.bindPopup(`
            <strong>${r.name}</strong><br>
            Category: ${r.category}<br>
            Rating: <span class="stars">${"★".repeat(r.rating)}${"☆".repeat(5-r.rating)}</span><br>
            Notes: ${r.notes}
        `);
        markers.push(marker);
    });
}

function clearMarkers() {
    markers.forEach(m => map.removeLayer(m));
    markers = [];
}

document.getElementById("searchInput").addEventListener("input", e => {
    const term = e.target.value.toLowerCase();
    const filtered = restaurants.filter(r => r.name.toLowerCase().includes(term));
    displayFiltered(filtered);
});

document.getElementById("categoryFilter").addEventListener("change", e => {
    const cat = e.target.value;
    const filtered = cat === "all" ? restaurants : restaurants.filter(r => r.category === cat);
    displayFiltered(filtered);
});

function displayFiltered(list) {
    clearMarkers();
    list.forEach(r => {
        const marker = L.marker([r.lat, r.lng]).addTo(map);
        marker.bindPopup(`
            <strong>${r.name}</strong><br>
            Category: ${r.category}<br>
            Rating: <span class="stars">${"★".repeat(r.rating)}${"☆".repeat(5-r.rating)}</span><br>
            Notes: ${r.notes}
        `);
        markers.push(marker);
    });
}

function resetMap() {
    document.getElementById("searchInput").value = "";
    document.getElementById("categoryFilter").value = "all";
    loadMarkers();
}

function showAddForm() {
    document.getElementById("addForm").style.display = "block";
}
function closeAddForm() {
    document.getElementById("addForm").style.display = "none";
}
function saveRestaurant() {
    const name = document.getElementById("newName").value;
    const category = document.getElementById("newCategory").value;
    const rating = parseInt(document.getElementById("newRating").value);
    const notes = document.getElementById("newNotes").value;

    if (!name || !category || !rating) {
        alert("Please fill in all fields");
        return;
    }

    // Add to list in current view (default to center of map for demo)
    const center = map.getCenter();
    restaurants.push({
        name, category, rating, notes,
        lat: center.lat, lng: center.lng
    });
    closeAddForm();
    loadMarkers();
}

initMap();
</script>
</body>
</html>